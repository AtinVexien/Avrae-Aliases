!alias fireball {{a,cc,N,c= int("%1%") if "%1%".isdigit() else 1, "Necklace of Fireballs", vroll("1d6+3"),combat()}}{{"i " if c and c.me else ""}}cast fireball -i -dc 15
{{l="3rd" if a==1 else "4th" if a==2 else "5th" if a==3 else "6th" if a==4 else "7th" if a==5 else "8th" if a==6 else "9th"}} 
{{v=cc_exists(cc)}} {{create_cc_nx(cc,0,N.total,'none','default')}} {{set_cc(cc, N.total) if not v else ""}} {{x=get_cc(cc)-a}}
-title "<name> throws {{a if a>1 else "one"}} bright red {{'beads' if a>1 else 'bead'}} from their {{cc}} to release a {{l}} level [sname]!"
{{mod_cc(cc, -a) if (get_cc(cc)-a>=0) else err("You don't have enough beads.  You tried to use " + str(a) + "  beads but you only have " + str(get_cc(cc)) + ".")}}
-l {2+a} 
-f "{{"Necklace of Fireballs "+str(-a)+" | **Beads Remaining:** "+ str(x)+" \nYou can use an action to detach a bead and throw it up to 60 feet away. When it reaches the end of its trajectory, the bead detonates as a 3rd-level fireball spell (save DC 15).\nYou can hurl multiple beads, or even the whole necklace, as one action. When you do so, increase the level of the fireball by 1 for each bead beyond the first." if v else "Necklace of Fireballs "+str(-a)+" | **Beads Remaining:** "+ str(x)+" \nYou can use an action to detach a bead and throw it up to 60 feet away. When it reaches the end of its trajectory, the bead detonates as a 3rd-level fireball spell (save DC 15).\nYou can hurl multiple beads, or even the whole necklace, as one action. When you do so, increase the level of the fireball by 1 for each bead beyond the first.\n\nYou didn't have a CC for this, so we rolled for the number of beads and made the CC. You got " +str(N)+ " beads. Please correct this if not the case." if not v else ""}}"
{{delete_cc(cc) if get_cc(cc)==0 else ""}}
